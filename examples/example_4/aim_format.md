# AiM CSV File Format Reference

This document describes the structure and content of CSV files generated by the AiM Race Studio software (both RS2 and RS3 versions). These files contain logged data from AiM motorsport data loggers, such as the Solo 2 DL or MyChron 5S.

## Overview

The AiM CSV format is a plain text, comma-separated file that presents time-series data in a tabular format. The specific columns can vary depending on the data logger model, its configuration, and the sensors connected during the logging session.

The file is structured with header information followed by the actual data channels.

## File Structure

The file typically has two main sections:

1. **Session Information (Header Rows)**: Metadata about the logging session.
2. **Data Channels (Column Headers & Data Rows)**: The recorded time-series data points.

### 1. Session Information

The first few rows (usually 2-3) contain metadata. This information is critical for identifying the session but often needs to be parsed separately from the main data set.

| Row | Content | Description | Example Content | Notes |
|-----|---------|-------------|-----------------|-------|
| 1 | File Type/Description | Identifies the source. | AiM Race Studio Analysis Export | |
| 2 | Session Details | Contains key session properties. | Vehicle: MyCar, Driver: John Doe, Track: Silverstone, Date: 2025/10/25, Time: 14:30:00 | |
| 3 | Units | This row lists the units for the corresponding column headers in Row 4. | Time (s), GPS Speed (km/h), Engine RPM (rpm), ... | |

### 2. Data Channels

The main body of the file starts immediately after the metadata rows.

| Row | Content | Description | Example Content | Notes |
|-----|---------|-------------|-----------------|-------|
| 4 | Column Headers | The names of the data channels. These can vary based on user configuration. | Time, GPS Speed, RPM, ThrPos, ... | |
| 5+ | Data Rows | The time-series data values, aligned with the headers above. | 0.01, 15.2, 4500, 10.5, ... | |

## Key Data Channels and Naming Conventions

AiM software allows flexible channel naming, but certain common identifiers are used by default. Developers should be aware that the exact name might vary, but the unit row helps in identification.

Common channel headers often include:

| Common Header | Description | Typical Units | Data Type |
|---------------|-------------|---------------|-----------|
| Time | Time from the start of the session/lap | (s) (seconds) | Float |
| Lap | Current Lap Number | (unitless) | Integer |
| Dist | Distance traveled in the current lap or session | (m) or (ft) | Float |
| GPS Speed | Vehicle speed via GPS data | (km/h) or (mph) | Float |
| RPM | Engine Revolutions Per Minute | (rpm) | Integer/Float |
| ThrPos | Throttle position percentage | (%) | Float |
| Brake | Brake application (digital channel) | (on/off) or (V) | Boolean/Float |
| Gear | Current engaged gear | (unitless) or (ADC) | Integer |
| LonAcc | Longitudinal Acceleration (forward/back) | (G) or (m/s^2) | Float |
| LatAcc | Lateral Acceleration (side to side) | (G) or (m/s^2) | Float |
| WaterT | Water Temperature | (°C) or (°F) | Float |
| OilP | Oil Pressure | (bar) or (psi) | Float |

## Parsing Considerations for Developers

When building a gem to handle these files, consider the following:

- **Variable Headers**: The number and names of columns are not fixed. The user defines what is logged and how it's named in their device configuration.
- **Unit Row**: The row immediately preceding the main data header row contains the units. This is essential for correct data interpretation and conversion.
- **Delimiters**: The format strictly uses commas (`,`) as delimiters. Fields containing commas, line breaks, or double quotes are typically enclosed in double quotes as per the RFC 4180 standard.
- **Data Rate**: The logging frequency can be very high (e.g., 50Hz, 100Hz). Be prepared to handle large files efficiently.
- **Missing Data**: Gaps in data are often represented by empty fields or potentially specific error values within the CSV.

A robust parser should first read the initial metadata rows to identify the actual data start point (the header row with channel names and the preceding unit row), and then process the subsequent rows as a standard tabular dataset.